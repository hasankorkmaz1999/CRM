<div class="dashboard">
  <!-- KPI Cards -->


  <div class="left-wrapper">


    <div class="quick-actions-container">
      <button  (click)="goToUserAndOpenDialog()">
        <mat-icon>person_add</mat-icon>
        Add New User
      </button>
  
      <button  (click)="goToCustomerAndOpenDialog()">
        <mat-icon>group_add</mat-icon>
        Add New Customer
      </button>
      
      <button  (click)="goToEventAndOpenDialog()">
        <mat-icon>event</mat-icon>
        Add New Event
      </button>
      
    </div>


<div class="middle-wrapper">

  <div class="events-container">
    <div class="kpi-cards">
      <div class="kpi-card">
        <h3>Total Events</h3>
        <p>{{ totalEvents }}</p>
      </div>
      <div class="kpi-card">
        <h3>Events Today</h3>
        <p>{{ eventsToday }}</p>
      </div>
      <div class="kpi-card">
        <h3>Events This Week</h3>
        <p>{{ eventsThisWeek }}</p>
      </div>
    </div>

    <div class="upcoming-events">
      <h3>Upcoming Events</h3>
    
      <!-- Wenn keine Events vorhanden sind -->
      <div *ngIf="!upcomingEvents || upcomingEvents.length === 0" class="no-events-div">
        <p class="no-events-placeholder">
          No upcoming events
        </p>
      </div>
    
      <!-- Wenn Events vorhanden sind -->
      <div *ngIf="upcomingEvents && upcomingEvents.length > 0" class="events-wrapper">
        <ul>
          <li
            *ngFor="let event of upcomingEvents; let i = index"
            (click)="openEventDetails(event)"
            [ngClass]="getEventClass(event.type)"
            [matTooltip]="isEventToday(event.date) && event.id ? 'Starts in: ' + (countdowns[event.id] || 'Ended') : ''"
            matTooltipPosition="above"
          >
            <div class="event-item">
              <h4>{{ event.type }}</h4>
              <mat-icon>event</mat-icon>
            </div>
            <div class="date-div">
              <p>{{ event.date | date : 'MMMM d, y' }}</p>
            </div>
            <div>
              <p>{{ event.time }}</p>
            </div>
          </li>
        </ul>
      </div>
    
      <button class="go-calendar" routerLink="/calendar-angular">
        Go to Calendar
      </button>
    </div>
    
    
  </div>




<div class="threads-container">
<h1>New Announcements</h1>
</div>
  


 






</div>


<div class="todos-section">

  <div class="todo-header">
    <h3>To-Dos</h3>
  
    <div class="todo-input-section">
      <!-- To-Do Input Form -->
      <form (ngSubmit)="addTodo()" [formGroup]="todoForm" class="todo-form">
        <textarea
          formControlName="title"
          placeholder="Enter a new task..."
          name="title"
          required
          cdkTextareaAutosize
          matInput
          #autosize="cdkTextareaAutosize"
          (input)="autosize.resizeToFitContent(true)"
          class="todo-textarea"
        ></textarea>
  
        <button [disabled]="todoForm.invalid" class="add-todo-btn">
          <mat-icon class="add-button">add</mat-icon>
        </button>
      </form>
    </div>
  </div>



  <div class="right-section-todo">

<div class="todo-wrapper">

  <!-- Display To-Dos -->
  <ul class="todo-list">
    <li
    *ngFor="let todo of todos; let i = index; trackBy: trackByTodoId"
    [class.new-todo]="i === 0 && isNewTodo"
    (animationend)="resetNewTodoFlag()"
    class="todo-item"
  >
      <label>
        <input
          type="checkbox"
          [checked]="todo.completed"
          (change)="toggleTodoCompletion(todo)"
          class="custom-checkbox"
        />
        <span>{{ todo.description }}</span>
      </label>
  
      <button (click)="deleteTodo(todo.id)" class="delete-btn">
        <mat-icon>delete</mat-icon>
      </button>
    </li>
  </ul>
  
  
  
 
</div>

<div class="progress-div">
  <mat-progress-bar mode="determinate" [value]="progressValue"></mat-progress-bar>
  <p class="progress-text">{{ completedTasks }}/{{ totalTasks }} completed</p>
  </div>

</div>

</div>






</div>



 <!-- Upcoming Events -->
 <div class="logs-section-wrapper">
  <div class="logs-section" #logsSection>
    <h3>Recent Activity Logs</h3>
    <ul>
      <li
        class="list-elements"
        *ngFor="let log of visibleLogs"
        [ngClass]="'entity-' + (log.entityType?.toLowerCase() || 'unknown')"
      >
        <div class="log-message">
          <strong [innerHTML]="generateLogMessage(log)"></strong>
        </div>
       
      </li>
    </ul>
    <button
      *ngIf="logs.length > visibleLogs.length"
      class="go-calendar"
      (click)="navigateToAllLogs()"
    >
      View All Logs
    </button>
  </div>
</div>



</div>
