<div class="dashboard">
    <!-- KPI Cards -->
    <div class="kpi-cards">
      <div class="kpi-card">
        <h3>Total Events</h3>
        <p>{{ totalEvents }}</p>
      </div>
      <div class="kpi-card">
        <h3>Events Today</h3>
        <p>{{ eventsToday }}</p>
      </div>
      <div class="kpi-card">
        <h3>Events This Week</h3>
        <p>{{ eventsThisWeek }}</p>
      </div>
    </div>
  
    <!-- Upcoming Events -->
    <div class="upcoming-events">
      <h3>Upcoming Events</h3>
      <ul>
        <li
          *ngFor="let event of upcomingEvents; let i = index"
          (click)="openEventDetails(event)"
          [ngClass]="{ 'highlight-today': isEventToday(event.date) }"
       
        >
          <div class="event-item">
            <h4>{{ event.type }}</h4>
            <p>{{ event.date | date: 'short' }}</p>
            <p>Organized by: {{ event.users.join(', ') }}</p>
            <p *ngIf="isEventToday(event.date) && event.id">
              Starts in: {{ countdowns[event.id] || 'Ended' }}
            </p>
          </div>
        </li>
      </ul>
    </div>
  


    <div class="logs-section">
      <h3>Recent Activity Logs</h3>
      <ul>
        <li
          class="list-elements"
          *ngFor="let log of filteredLogs"
          [ngClass]="'entity-' + (log.entityType?.toLowerCase() || 'unknown')"
        >
          <div class="log-message">
            <strong [innerHTML]="generateLogMessage(log)"></strong>
          </div>
          <div class="buttons-comtainer">
            <small *ngIf="log.timestamp">{{ log.timestamp | date: 'short' }}</small>
            <a
              *ngIf="log.entityType === 'customer' && log.action === 'edit'"
              (click)="navigateToCustomerDetails(log)"
              class="see-details-link"
            >
              View Customer Details
            </a>
            <a
              *ngIf="log.entityType === 'user' && log.action === 'edit'"
              (click)="navigateToUserDetails(log)"
              class="see-details-link"
            >
              View User Details
            </a>
            <a
              *ngIf="isEventEditLog(log)"
              (click)="openLogDetails(log)"
              class="see-details-link"
            >
              See Details
            </a>
          </div>
        </li>
      </ul>
      <button mat-raised-button color="primary" (click)="navigateToAllLogs()">
        View All Logs
      </button>
    </div>
    
    